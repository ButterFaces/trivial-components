<html lang="en">

@@include('includes/head.html', {"title": "TrivialTree - Trivial Components"})

<body data-spy="scroll" data-target="#navbar">

@@include('includes/nav.html', {"activeNavLink": "showcase"})

<div class="page-content">

    <section class="page-header-box">
        <h1 class="project-name">TrivialTree</h1>
    </section>

    <div class="container">

        <div class="row">
            <div class="col-sm-5">
                <h3>Options</h3>

                <form id="config">
                    <div class="checkbox">
                        <label>
                            <input type="checkbox" id="showTrigger" name="showTrigger"> showTrigger
                        </label>
                    </div>
                    <div class="checkbox">
                        <label>
                            <input type="checkbox" id="customQueryFunction" name="customQueryFunction"> use custom query function (1s delay)
                        </label>
                    </div>
                    <div class="form-group">
                        <label for="freeTextSeparators">freeTextSeparators</label>
                        <input class="form-control" id="freeTextSeparators" name="freeTextSeparators" type="text" value="[',', ';']"/>
                    </div>
                    <div class="checkbox">
                        <label>
                            <input type="checkbox" id="autoComplete" name="autoComplete" checked> autoComplete
                        </label>
                    </div>
                    <div class="form-group">
                        <label for="autoCompleteDelay">autoCompleteDelay (ms)</label>
                        <input class="form-control" id="autoCompleteDelay" name="autoCompleteDelay" type="number" value="0"/>
                    </div>
                    <div class="checkbox">
                        <label>
                            <input type="checkbox" id="allowFreeText" name="allowFreeText"> allowFreeText
                        </label>
                    </div>
                    <div class="form-group">
                        <label for="fakeEntryValues">fakeEntryValues</label>
                        <textarea class="form-control code showcase-textarea" id="fakeEntryValues" name="fakeEntryValues">{
    "_isFakeEntry": true
}</textarea>
                    </div>
                    <div class="form-group">
                        <label for="valueProperty">valueProperty</label>
                        <input class="form-control" id="valueProperty" name="valueProperty" value="id"/>
                    </div>
                    <div class="form-group">
                        <label for="valueSeparator">valueSeparator</label>
                        <input class="form-control" id="valueSeparator" name="valueSeparator" value=","/>
                    </div>
                    <div class="form-group">
                        <label for="inputTextProperty">inputTextProperty</label>
                        <input class="form-control" id="inputTextProperty" name="inputTextProperty" value="displayValue"/>
                    </div>
                    <div class="form-group">
                        <label for="matchingMode">matchingMode</label>
                        <input id="matchingMode" name="matchingMode"/>
                    </div>
                    <div class="checkbox">
                        <label>
                            <input type="checkbox" id="ignoreCase" name="ignoreCase" checked="checked"> ignoreCase
                        </label>
                    </div>
                    <div class="form-group">
                        <label for="template">template</label>
                        <input id="template" name="template"/>
                    </div>
                    <div class="form-group">
                        <label for="selectedEntryTemplate">selectedEntryTemplate</label>
                        <input id="selectedEntryTemplate" name="selectedEntryTemplate"/>
                    </div>
                    <div class="form-group">
                        <label for="spinnerTemplate">spinnerTemplate</label>
                <textarea class="form-control code showcase-textarea" id="spinnerTemplate" name="spinnerTemplate"><div class="tr-default-spinner">
                    <div>Fetching data...</div>
                </div></textarea>
                    </div>
                    <div class="form-group">
                        <label for="noEntriesTemplate">noEntriesTemplate</label>
                <textarea class="form-control code showcase-textarea" id="noEntriesTemplate" name="noEntriesTemplate"><div class="tr-default-no-data-display">
                    <div>No matching entries...</div>
                </div></textarea>
                    </div>
                    <div class="form-group">
                        <label for="entries">entries</label>
                <textarea class="form-control code showcase-textarea" id="entries" name="entries">
                </textarea>
                    </div>
                    <div class="form-group">
                        <label for="selectedEntries">selectedEntries</label>
                        <textarea class="form-control code showcase-textarea" id="selectedEntries" name="selectedEntries"></textarea>
                    </div>
                </form>
            </div>
            <div class="col-sm-7">
                <h3>Result</h3>

                <div id="treeWrapper"></div>
                <h4>Original input value</h4>
                <code id="originalInputValue"></code>
                <h4>Selected entry</h4>
                <pre id="selectedEntryDisplay" class="prettyprint lang-js"></pre>
                <h3>Configuration</h3>
                <pre id="configDisplay" class="prettyprint lang-js"></pre>
            </div>
        </div>

        <h3>Configuration Options<a class="anchor" id="configuration"></a></h3>

        <div class="table-responsive">
            <table class="table table-condensed table-hover">
                <thead>
                <tr>
                    <th>Option</th>
                    <th>Description</th>
                    <th>Default</th>
                </tr>
                </thead>
                <tbody>

                </tbody>
            </table>
        </div>

    </div>
    <!-- container -->
</div>

@@include('includes/footer.html')
@@include('includes/scripts.html')

<script>
    $(function () {

        var entries = [{
            displayValue: "Mail",
            additionalInfo: "43 unread",
            imageUrl: "img/tree/mail.png",
            isLeaf: false,
            expanded: true,
            children: [{
                displayValue: "Inbox",
                additionalInfo: "21 unread",
                imageUrl: "img/tree/arrow-down.png",
                isLeaf: true
            }, {
                displayValue: "Drafts",
                additionalInfo: "5",
                imageUrl: "img/tree/compose.png",
                isLeaf: true
            }, {
                displayValue: "Sent",
                additionalInfo: "529 sent, 1 sending",
                imageUrl: "img/tree/arrow-up.png",
                isLeaf: true
            }, {
                displayValue: "Tagged",
                additionalInfo: "9 unread",
                imageUrl: "img/tree/shop.png",
                isLeaf: false,
                children: [{
                    displayValue: "Important",
                    additionalInfo: "5 unread",
                    imageUrl: "img/tree/shop.png",
                    isLeaf: true

                }, {
                    displayValue: "Private",
                    additionalInfo: "4 unread",
                    imageUrl: "img/tree/shop.png",
                    isLeaf: true

                }]
            }, {
                displayValue: "Folders",
                additionalInfo: "22 unread",
                imageUrl: "img/tree/folder.png",
                isLeaf: false,
                children: [{
                    displayValue: "Project X",
                    additionalInfo: "4 unread",
                    imageUrl: "img/tree/folder.png",
                    isLeaf: true

                }, {
                    displayValue: "Bills",
                    additionalInfo: "18 unread",
                    imageUrl: "img/tree/folder.png",
                    isLeaf: true

                }]
            }, {
                displayValue: "Trash",
                additionalInfo: "7293 kB",
                imageUrl: "img/tree/recycle.png",
                isLeaf: true
            }]
        }, {
            displayValue: "Notes",
            imageUrl: "img/tree/booklet.png",
            isLeaf: false,
            children: [{
                displayValue: "Product Management 2.0",
                imageUrl: "img/tree/folder.png",
                isLeaf: false,
                children: [{
                    displayValue: "Brainstorming",
                    additionalInfo: "Yesterday",
                    imageUrl: "img/tree/document.png",
                    isLeaf: true
                }, {
                    displayValue: "Presentation Notes",
                    additionalInfo: "5 minutes ago",
                    imageUrl: "img/tree/document.png",
                    isLeaf: true
                }, {
                    displayValue: "Concept",
                    additionalInfo: "2015-05-28",
                    imageUrl: "img/tree/document.png",
                    isLeaf: true
                }]
            }, {
                displayValue: "Marketing",
                imageUrl: "img/tree/folder.png",
                isLeaf: false,
                children: [{
                    displayValue: "Promotions 2015",
                    additionalInfo: "2015-01-23",
                    imageUrl: "img/tree/document.png",
                    isLeaf: true
                }]

            }]
        }, {
            displayValue: "Calendar",
            imageUrl: "img/tree/calendar.png",
            isLeaf: true,
            statusColor: "#ee4400",
            additionalInfo: "2 overdue"
        }, {
            displayValue: "Contacts",
            imageUrl: "img/tree/contacts.png",
            isLeaf: true
        }];
        $('#entries').val(JSON.stringify(entries, null, 2));
        $('#selectedEntries').val(JSON.stringify([entries[0]], null, 2));

        $('#template').each(function () {
            $(this).TrivialTagBox({
                template: TrivialComponents.singleLineTemplate,
                entries: [{
                    displayValue: "Image with two lines of text",
                    value: TrivialComponents.image2LinesTemplate
                }, {
                    displayValue: "Round image, 2 lines, color bubble",
                    value: TrivialComponents.roundImage2LinesColorBubbleTemplate
                }, {
                    displayValue: "Icon with two lines of text",
                    value: TrivialComponents.icon2LinesTemplate
                }, {
                    displayValue: "Icon with single line of text",
                    value: TrivialComponents.iconSingleLineTemplate
                }, {
                    displayValue: "Single line of text",
                    value: TrivialComponents.singleLineTemplate
                }],
                selectedEntries: [{
                    displayValue: "Icon with two lines of text",
                    value: TrivialComponents.icon2LinesTemplate
                }],
                allowFreeText: false
            })
        });
        $('#matchingMode').TrivialComboBox({
            template: TrivialComponents.singleLineTemplate,
            entries: [{
                displayValue: "contains"
            }, {
                displayValue: "prefix"
            }, {
                displayValue: "prefix-word"
            }],
            selectedEntry: {
                displayValue: "contains"
            },
            allowFreeText: false
        });

        var customQueryFunction = function (queryString, resultCallback) {
            setTimeout(function () {
                resultCallback(createEntries(100).filter(function (entry) {
                    return entry.displayValue.toLowerCase().indexOf(queryString.toLowerCase()) != -1 || entry.additionalInfo.toLowerCase().indexOf(queryString.toLowerCase()) != -1;
                }));
            }, 1000);
        };

        var $treeOriginalInput;

        function createTree() {
            $('#treeWrapper').empty();
            $treeOriginalInput = $('<input id="tree"/>').appendTo('#treeWrapper');
            $treeOriginalInput.on('change', function () {
                $('#originalInputValue').text($(this).val());
            });
            var config = {
                showTrigger: $('#showTrigger').is(':checked'),
                allowFreeText: $('#allowFreeText').is(':checked'),
                fakeEntryValues: JSON.parse($('#fakeEntryValues').val()),
                freeTextSeparators: eval($('#freeTextSeparators').val()),
                autoComplete: $('#autoComplete').is(':checked'),
                queryFunction: $('#customQueryFunction').is(':checked') ? customQueryFunction : undefined,
                autoCompleteDelay: parseInt($('#autoCompleteDelay').val()),
                valueProperty: $('#valueProperty').val(),
                valueSeparator: $('#valueSeparator').val(),
                inputTextProperty: $('#inputTextProperty').val(),
                matchingOptions: {
                    matchingMode: $('#matchingMode').TrivialComboBox().getSelectedEntry().displayValue,
                    ignoreCase: $('#ignoreCase').is(':checked')
                },
                templates: $('#template').TrivialTagBox().getSelectedEntries().map(function(v) {return v.value}),
                spinnerTemplate: $('#spinnerTemplate').val(),
                noEntriesTemplate: $('#noEntriesTemplate').val(),
                selectedEntries: JSON.parse($('#selectedEntries').val()),
                entries: JSON.parse($('#entries').val())
            };
            $('#configDisplay').removeClass("prettyprinted")
                    .text("$('#tree').TrivialTree(" + JSON.stringify(config, function (key, value) {
                        if (key === 'queryFunction' && config.queryFunction) {
                            return "%queryFunction%";
                        } else {
                            return value;
                        }
                    }, 2).replace("\"%queryFunction%\"", customQueryFunction.toString()) + ");");
            var trivialTree = $treeOriginalInput.TrivialTree(config);

            function updateSelectedEntryDisplay() {
//                $('#selectedEntryDisplay')
//                        .text(JSON.stringify(trivialTree.getSelectedEntries(), null, 2))
//                        .removeClass("prettyprinted");
//                prettyPrint();
            }

            updateSelectedEntryDisplay();
            trivialTree.$.change(function () {
                updateSelectedEntryDisplay.call(this);
            });
            prettyPrint();
        }

        createTree();

        $('#config input, #config textarea').change(function () {
            createTree();
        });

    });
</script>

@@include('includes/ga.html')

</body>
</html>